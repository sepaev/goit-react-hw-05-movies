(this["webpackJsonpgoit-react-hw-05-movies"]=this["webpackJsonpgoit-react-hw-05-movies"]||[]).push([[0],{15:function(e,t,n){e.exports={_nav:"Navigation__nav__3bsi8",_link:"Navigation__link__UAz3_",_activeLink:"Navigation__activeLink__3JKDl"}},16:function(e,t,n){e.exports={_goBackButton:"FilmInfo__goBackButton__2ajhQ",_infoSection:"FilmInfo__infoSection__35vGL",_imageWrapper:"FilmInfo__imageWrapper__2tNs2",_posterImage:"FilmInfo__posterImage__3fXUY"}},17:function(e,t,n){e.exports={_filmList:"FilmList__filmList__3W2mF",_filmLink:"FilmList__filmLink__nP15H"}},22:function(e,t,n){e.exports={_searchInput:"SearchBox__searchInput__1O67z",_searchButton:"SearchBox__searchButton__2VMyP"}},23:function(e,t,n){e.exports={_autorName:"Reviews__autorName__1jflS",_autorLink:"Reviews__autorLink__ACb82"}},41:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(34),s=n.n(c),i=n(11),o=(n(41),n(3)),u=n(2),l=n.n(u),j=n(6),h=n(5),p=n(17),b=n.n(p),d=n(0);var f=function(e){var t=e.films,n=e.pathBack,r=void 0===n?"/":n;return Object(d.jsx)("ul",{className:b.a._filmList,children:t.map((function(e){return Object(d.jsx)("li",{className:b.a._filmItem,children:Object(d.jsx)(i.b,{to:{pathname:"movies/"+e.id,pathback:r},className:b.a._filmLink,children:e.title})},e.id)}))})},v=n(13),x=n.n(v);x.a.defaults.baseURL="https://api.themoviedb.org/3/",x.a.defaults.params={api_key:"8948cf34f147d17edd39edcb74badce4",language:"en-US"};var O=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"day",e.next=3,x.a.get("/trending/movie/".concat(t),{});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,e.next=3,x.a.get("/search/movie",{params:{query:t,page:n,include_adult:!1}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/movie/".concat(t),{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/movie/".concat(t,"/credits"),{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,e.next=3,x.a.get("/movie/".concat(t,"/reviews"),{params:{page:n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var w=function(){var e=Object(r.useState)(null),t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:if(200!==(t=e.sent).status){e.next=8;break}a(t.data.results),e.next=9;break;case 8:throw new Error("Error - "+t.status);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.log("rejected   "+e.t0.message),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{children:"Trending today"}),n&&Object(d.jsx)(f,{films:n})]})},y=n(24),N=n(22),S=n.n(N);var L=function(e){var t=e.onSearch,n=Object(r.useState)(""),a=Object(h.a)(n,2),c=a[0],s=a[1];function i(){t(c),s("")}return Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"",children:Object(d.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},onKeyDown:function(e){"Enter"===e.code&&i()},className:S.a._searchInput,value:c,placeholder:"Film name"})}),Object(d.jsx)("button",{className:S.a._searchButton,onClick:i,children:"Search"})]})};var B=function(e){var t=e.films,n=e.response,r=e.pathBack;return t?Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{children:"Search result"}),t&&Object(d.jsx)(f,{films:t,pathBack:r,response:n}),0===t.length&&Object(d.jsx)("h2",{children:"Not found. Please search another film."})]}):Object(d.jsx)("h2",{children:"loading..."})};var F=function(){var e=Object(r.useState)(""),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(h.a)(c,2),i=s[0],u=s[1],p=Object(r.useState)(null),b=Object(h.a)(p,2),f=b[0],v=b[1],x=Object(o.f)(),O=Object(o.g)(),_=new URLSearchParams(O.search).get("query"),g=n||_;return Object(r.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,n,r,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(g,1);case 3:if(200!==(t=e.sent).status){e.next=11;break}n=t.data,r=n.page,a=n.total_pages,c=n.results,s=n.total_results,v({page:r,total_pages:a,total_results:s,search_query:g}),u(c),x.push(Object(y.a)(Object(y.a)({},O),{},{search:"query=".concat(g)})),e.next=12;break;case 11:throw new Error("Error - "+t.status);case 12:e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(0),console.log("rejected   "+e.t0.message),v(null),u(null),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}g&&(f&&f.search_query===g||function(){e.apply(this,arguments)}())}),[x,O,f,g]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(L,{onSearch:function(e){a(e),v(null)}}),_&&Object(d.jsx)(B,{films:i,response:f,pathBack:"/movies?query="+_})]})},I=n(16),C=n.n(I),E=n(12),D=n.n(E),q=n.p+"static/media/no-image-available.ae2f3efe.png";var A=function(e){var t=e.cast;if(t)return Object(d.jsx)("div",{children:Object(d.jsx)("ul",{children:t.map((function(e){var t=e.id,n=e.name,a=e.character,c=e.profile_path,s=c?"https://image.tmdb.org/t/p/w300"+c:q;return Object(d.jsxs)(r.Fragment,{children:[Object(d.jsx)("img",{src:s,alt:n+" as "+a,width:"100px"},t+"_1"),Object(d.jsxs)("li",{children:[Object(d.jsx)("p",{children:n},t+"_3"),Object(d.jsx)("p",{children:a},t+"_4")]},t+"_2")]},t+"_0")}))})})};var P=function(e){var t=e.comment;return t?t.map((function(e,t){return Object(d.jsx)("p",{children:e},t)})):Object(d.jsx)("h3",{children:"no comments"})},U=n(23),W=n.n(U);var R=function(e){var t=e.reviews;return e.page,t?Object(d.jsx)("ul",{children:t.map((function(e){var t=e.id,n=e.author,r=e.content,a=e.url,c=r.split("\r\n\r\n");return Object(d.jsxs)("li",{children:[Object(d.jsxs)("p",{className:W.a._autorName,children:["Author:",Object(d.jsxs)("a",{href:a,className:W.a._autorLink,children:[" ",n," "]})]}),Object(d.jsx)(P,{comment:c})]},t)}))}):Object(d.jsx)("h3",{children:"We don't have any reviews for this movie."})};var T=function(e){var t=e.block,n=e.blockData;if(!n)return Object(d.jsx)("h3",{children:"loading..."});var r=n.cast,a=void 0===r?[]:r,c=n.results,s=void 0===c?[]:c,i=n.page,o=void 0===i?1:i;return"cast"===t?Object(d.jsx)(A,{cast:a}):s.length>1?Object(d.jsx)(R,{reviews:s,page:o}):Object(d.jsx)("h3",{children:"We don't have any reviews for this movie."})};Comment.propTypes={block:D.a.string,blockData:D.a.array};var G=function(e){var t=e.film,n=e.pathBack,a=Object(r.useState)(null),c=Object(h.a)(a,2),s=c[0],i=c[1],u=Object(r.useState)(null),p=Object(h.a)(u,2),b=p[0],f=p[1],v=Object(r.useState)("/"),x=Object(h.a)(v,2),O=x[0],m=x[1],_=Object(o.i)().url,w=Object(o.f)(),y=Object(o.g)();n&&n!==O&&m(n);var N=function(){var e=y.pathname.split("/"),t=e[e.length-1];return"cast"===t||"reviews"===t?t:""}();function S(e){e.preventDefault();var t=e.target.innerText.toLowerCase();return s&&s===t?s===t?(i(null),w.push(w.location.pathname.split(s)[0]),void(N="")):void 0:(i(t),void w.push((_+"/"+t).split("//").join("/")))}if(Object(r.useEffect)((function(){if(!t||!N)return Object(d.jsx)("h1",{children:"loading..."});var e=t.id;function n(){return n=Object(j.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"cast"!==n){t.next=7;break}return t.next=4,g(e);case 4:case 10:r=t.sent,t.next=15;break;case 7:if("reviews"!==n){t.next=13;break}return t.next=10,k(e);case 13:return f(null),t.abrupt("return",Object(d.jsx)("h1",{children:"No cast"}));case 15:if(200!==r.status){t.next=19;break}f(r.data),t.next=20;break;case 19:throw new Error("Error - "+r.status);case 20:t.next=26;break;case 22:return t.prev=22,t.t0=t.catch(0),console.log("rejected   "+t.t0.message),t.abrupt("return",null);case 26:case"end":return t.stop()}}),t,null,[[0,22]])}))),n.apply(this,arguments)}!function(e){n.apply(this,arguments)}(s),N!==s&&i(N)}),[t,s,N]),!t)return Object(d.jsx)("h1",{children:"loading..."});var L=t.id,B=t.title,F=t.poster_path,I=t.popularity,E=t.overview,D=t.genres,q=t.release_date.split("-")[0],A=D.map((function(e){return e.name})).join(", ");return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:C.a._goBackButton,onClick:function(){w.push(O)},children:"Go Back"}),Object(d.jsxs)("section",{className:C.a._infoSection,children:[Object(d.jsx)("h1",{className:"visually-hidden",children:"Film info"}),Object(d.jsx)("div",{className:C.a._imageWrapper,children:Object(d.jsx)("img",{src:"https://image.tmdb.org/t/p/w500"+F,alt:B,className:C.a._posterImage})}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"".concat(B," (").concat(q,")")}),Object(d.jsxs)("p",{children:["User Score: ",I.toFixed(0)," %"]}),Object(d.jsx)("h3",{children:"Overview"}),Object(d.jsx)("p",{children:E}),Object(d.jsx)("h4",{children:"Genres"}),Object(d.jsx)("p",{children:A})]})]},L),Object(d.jsx)("hr",{}),Object(d.jsxs)("section",{children:[Object(d.jsx)("h1",{children:"Additional information"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)("a",{href:_+"/cast",onClick:S,children:"Cast"})}),Object(d.jsx)("li",{children:Object(d.jsx)("a",{href:_+"/reviews",onClick:S,children:"Reviews"})})]})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("section",{children:Object(d.jsx)(o.a,{path:_+"/"+s,children:s&&Object(d.jsx)(T,{block:s,blockData:b})})})]})};var J=function(){return Object(d.jsx)("h1",{children:"404 No such page :("})};var M=function(){var e=Object(r.useState)(null),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(h.a)(c,2),i=s[0],u=s[1],p=Object(r.useState)(!1),b=Object(h.a)(p,2),f=b[0],v=b[1],x=Object(o.h)().movieId,O=Object(o.g)();return parseInt(x).toString().length===x.length||f||v(!0),Object(r.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,n,r,c,s,i,o,u,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(parseInt(x));case 3:if(200!==(t=e.sent).status){e.next=10;break}n=t.data,r=n.id,c=n.title,s=n.poster_path,i=n.popularity,o=n.overview,u=n.genres,j=n.release_date,a({id:r,title:c,poster_path:s,popularity:i,overview:o,genres:u,release_date:j}),v(!1),e.next=11;break;case 10:throw new Error("Error - "+t.status);case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(0),console.log("rejected   "+e.t0.message),404===e.t0.response.status&&v(!0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x]),f?Object(d.jsx)(J,{}):Object(d.jsx)("div",{className:"container",children:x&&Object(d.jsx)(G,{film:n,pathBack:function(){var e=O.pathback;return e?(e!==i&&u(e),e||"/"):i}()})})},z=n(15),H=n.n(z);var K=function(){return Object(d.jsxs)("nav",{className:H.a._nav,children:[Object(d.jsx)(i.c,{exact:!0,to:"/",className:H.a._link,activeClassName:H.a._activeLink,children:"Home"}),Object(d.jsx)(i.c,{to:"/movies",className:H.a._link,activeClassName:H.a._activeLink,children:"Movies"})]})};var Q=function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("header",{className:"App-header",children:Object(d.jsx)(K,{})}),Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{path:"/",exact:!0,children:Object(d.jsx)(w,{})}),Object(d.jsx)(o.a,{path:"/movies/:movieId",children:Object(d.jsx)(M,{})}),Object(d.jsx)(o.a,{path:"/movies",children:Object(d.jsx)(F,{})}),Object(d.jsx)(o.a,{path:"/",children:Object(d.jsx)(J,{})})]})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(Q,{})})}),document.getElementById("root")),V()}},[[68,1,2]]]);
//# sourceMappingURL=main.9ee340bd.chunk.js.map